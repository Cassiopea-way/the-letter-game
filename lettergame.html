<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Это заголовок тайтл</title>
		<meta name="viewport" content="width=device-width,initial-scale=1.0">
        <link rel = "stylesheet" href = "style.css">		
	</head>
	<style>
	  td {border:1px solid black;
	      width:20px;
		  height:20px;
		  text-align:center;}
	  th {border:1px solid black;
	      width:20px;
		  height:20px;
		  text-align:center;}
	 #squarecloudx {
	   
	 }
     #squarecloudy {
	  
	  width:22px;
	  margin-top: -462px;
	 }	  
     #squarecloud {
	  
      margin-left:22px;	  
	 }
     #game {margin: auto auto;
			width:484px;}
     #menu {margin: 10px auto;
			width:234px;}
	 #surprise {
	   width:400px;
	   margin:0px auto;
	   text-align:center;
	   display:none;
	 }
     @keyframes changecolor {
	   from {
		background-color:limegreen;
	   }
	   to {
		background-color:red;
	   }
       }
	   @keyframes surprisecolor {
	   from {
		color:limegreen;
	   }
	   to {
		color:red;
	   }
       }
	   .supercolor {
	    animation-name: changecolor;
	    animation-duration: 1s;
	    animation-iteration-count: infinite;
		animation-timing-function: linear;
	    }
		.surpcolor {
	    animation-name: surprisecolor;
	    animation-duration: 1s;
	    animation-iteration-count: infinite;
		animation-timing-function: linear;
	    }
    </style>
	<body>
	<header>
	      {{menu}}
	   </header>
	   <div id = "game">
	   <div id = "menu">
	   <button id = "full" onclick = "fullTable()">Заполнить</button>
	   <button id = "change" disabled>Изменить</button>
	   <button id = "deletetd" disabled>Удалить</button>
	   </div>
	   <div id = "surprise"><h1></h1></div>
       <div id = "squarecloudx"></div>
       <div id = "squarecloud"></div>
       <div id = "squarecloudy"></div>
       </div>
       <footer>
		   {{footer}}
		</footer>
       <img src = "cat.jpg">		
	</body>
	<script src = "script.js"></script>
	<script>
	    var surprise = document.getElementById('surprise');
	    var squarecloud = document.getElementById('squarecloud');
	    var mass = ['a','b','c','d','e','f','g','h','i','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'];
		var newarr = [];
		var testarr = ['e','f','g','h','i','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'];
		var counter = 0;
		var table = document.createElement('table');
		var tablex = document.createElement('table');
		var tabley = document.createElement('table');
		squarecloudx.appendChild(tablex);
		squarecloudy.appendChild(tabley);
		squarecloud.appendChild(table);
		
		var trx = document.createElement('tr');
		tablex.appendChild(trx);
		var AllRowsx = tablex.rows;
		var AllRowsy = tabley.rows;
		  for (var i = 0; i <= 21; i++){
		    var tdx = document.createElement('th');
		    trx.appendChild(tdx);
			}
		 var r = 0;
		 for (var j = 1; j <= 21; j = j + 2){
			  AllRowsx[0].cells[j].innerHTML = r++;
			}
			
		  for (var i = 0; i <= 20; i++){
		    var tryy = document.createElement('tr');
		    tabley.appendChild(tryy);
		    var tdy = document.createElement('th');
			tryy.appendChild(tdy);
			}
		 var q = 0;
		 for (var j = 0; j <= 20; j = j + 2){
			  tabley.rows[j].cells[0].innerHTML = q++;
			}	
		
		for (var i = 0; i <= 20; i++ ){
		   var tr = document.createElement('tr');
		     for (var k = 0; k <= 20; k++){
			    var td = document.createElement('td');
				  tr.appendChild(td);
			 }
		   table.appendChild(tr);
		}
		var Allrows = table.rows;
		var Allcells = document.getElementsByTagName('td');
		function fullTable(){
		  for (var i = 0; i <= 20; i = i + 2){
		     for (var k = 0; k <= 20; k = k + 2){
                Allrows[i].cells[k].innerHTML = mass[Math.floor(Math.random()*mass.length)];			   
			 }
		  }
		}
		table.cellSpacing = "0";
		table.cellPadding = "0";
		tablex.cellSpacing = "0";
		tablex.cellPadding = "0";
		tabley.cellSpacing = "0";
		tabley.cellPadding = "0";
		
		function paintOver(cell1,cell2){
		   cell1.style.backgroundColor = "limegreen";
		   cell2.style.backgroundColor = "limegreen";
		}
		
		function gameOver(){
		  
		}
		
		function comparison (sourcemass,newmass,elem1,elem2) {
			    if (newmass.indexOf(elem1.innerHTML) == -1){
				   newmass.push(elem1.innerHTML);
				   counter++;
				   newmass.sort();
				}
				if (newmass.indexOf(elem2.innerHTML) == -1){
				   newmass.push(elem2.innerHTML);
				   counter++;
				   newmass.sort();
				}
				if (sourcemass.length == newmass.length){
				   for (var i = 0; i < Allcells.length; i++){
				     if (Allcells[i].style.backgroundColor == 'limegreen'){
					    Allcells[i].classList.add('supercolor');
					 }
				   }
				   surprise.style.display = 'block';
				   surprise.classList.add('surpcolor');
				}
			 alert(newmass,counter);
		}
		
		
		for (var i = 0; i < Allcells.length; i++){
		  Allcells[i].addEventListener('click', function(e){
			 let cell = e.target;
			 let row = cell.parentElement;
			 let rows = row.parentElement.children;
			 if (cell.innerHTML != ''){
			   cell.style.backgroundColor = "yellow";
			   var deletetd = document.getElementById('deletetd');
			   var changetd = document.getElementById('change');
               deletetd.disabled = false;
               changetd.disabled = false;			   
			   deletetd.onclick = function superdelete(){
			   cell.innerHTML = '';
			   cell.style.backgroundColor = "red";
			   deletetd.disabled = true;
               changetd.disabled = true;
			   }
			   changetd.onclick = function superchange(){
			     var rowchange = prompt('Ряд');
			     var columnchange = prompt('Колонка');
				 rowchange = rowchange*2;
				 columnchange = columnchange*2;
				 Allrows[rowchange].cells[columnchange].innerHTML = cell.innerHTML;
				 Allrows[rowchange].cells[columnchange].style.backgroundColor = "white";
				 cell.innerHTML = '';
				 cell.style.backgroundColor = "red";
				 deletetd.disabled = true;
                 changetd.disabled = true;
			   }
			 } else {
			 if (cell.style.backgroundColor == "red"){
			 cell.innerHTML = mass[Math.floor(Math.random()*mass.length)];
			 cell.style.backgroundColor = "white";
			 }
			 for (var i = 0;i < rows.length; i++){
			  if (rows[i] === row){
			    break;
			  }
			 }
			 let columns = row.children;
			 for (var j = 0; j < columns.length; j++){
			   if (columns[j] === cell){
			      for (var c = 0; c < mass.length; c++){
				    if (rows[i] == rows[0] || rows[i] == rows[20]){
				     if (columns[j - 1].innerHTML == mass[c]){					 
					     if (columns[j + 1].innerHTML == mass[c + 1]){
						       columns[j].style.background = "url('C:/images/arrowright.jfif')";
							   paintOver(columns[j - 1],columns[j + 1]);
							   comparison(mass,newarr,columns[j - 1],columns[j + 1]);   
						 }
						 if (columns[j + 1].innerHTML == mass[c - 1]){
						       columns[j].style.background = "url('C:/images/arrowleft.jfif')";
							   paintOver(columns[j - 1],columns[j + 1]);
							   comparison(mass,newarr,columns[j - 1],columns[j + 1]);
						 }
						 if (columns[j + 1].innerHTML == mass[c]){
						       columns[j].style.background = "url('C:/images/arrowdoubleright.jpg')";
							   paintOver(columns[j - 1],columns[j + 1]);
						 }
					 } 
					 }else {
					   if (columns[j] == columns[0] || columns[j] == columns[20]){ 
					  if (Allrows[i - 1].cells[j].innerHTML == mass[c]){					 
					     if (Allrows[i + 1].cells[j].innerHTML == mass[c + 1]){
						       columns[j].style.background = "url('C:/images/arrowdown.jfif')";
							   paintOver(Allrows[i - 1].cells[j],Allrows[i + 1].cells[j]);
							   comparison(mass,newarr,Allrows[i - 1].cells[j],Allrows[i + 1].cells[j]);
						 }
						 if (Allrows[i + 1].cells[j].innerHTML == mass[c - 1]){
						       columns[j].style.background = "url('C:/images/arrowup.jfif')";
							   paintOver(Allrows[i - 1].cells[j],Allrows[i + 1].cells[j]);
							   comparison(mass,newarr,Allrows[i - 1].cells[j],Allrows[i + 1].cells[j]);
						 }
						 if (Allrows[i + 1].cells[j].innerHTML == mass[c]){
						       columns[j].style.background = "url('C:/images/arrowdoubleup.jpg')";
							   paintOver(Allrows[i - 1].cells[j],Allrows[i + 1].cells[j]);
						 }
					 }
                  } else {
					   if (columns[j - 1].innerHTML == mass[c]){					 
					     if (columns[j + 1].innerHTML == mass[c + 1]){
						       columns[j].style.background = "url('C:/images/arrowright.jfif')";
							   paintOver(columns[j - 1],columns[j + 1]);
							   comparison(mass,newarr,columns[j - 1],columns[j + 1]);
						 }
						 if (columns[j + 1].innerHTML == mass[c - 1]){
						       columns[j].style.background = "url('C:/images/arrowleft.jfif')";
							   paintOver(columns[j - 1],columns[j + 1]);
							   comparison(mass,newarr,columns[j - 1],columns[j + 1]);
						 }
						 if (columns[j + 1].innerHTML == mass[c]){
						       columns[j].style.background = "url('C:/images/arrowdoubleright.jpg')";
							   paintOver(columns[j - 1],columns[j + 1]);
						 }
						 }
					   if (Allrows[i - 1].cells[j].innerHTML == mass[c]){					 
					     if (Allrows[i + 1].cells[j].innerHTML == mass[c + 1]){
						       columns[j].style.background = "url('C:/images/arrowdown.jfif')";
							   paintOver(Allrows[i - 1].cells[j],Allrows[i + 1].cells[j]);
							   comparison(mass,newarr,Allrows[i - 1].cells[j],Allrows[i + 1].cells[j]);
						 }
						 if (Allrows[i + 1].cells[j].innerHTML == mass[c - 1]){
						       columns[j].style.background = "url('C:/images/arrowup.jfif')";
							   paintOver(Allrows[i - 1].cells[j],Allrows[i + 1].cells[j]);
							   comparison(mass,newarr,Allrows[i - 1].cells[j],Allrows[i + 1].cells[j]);
						 }
						 if (Allrows[i + 1].cells[j].innerHTML == mass[c]){
						       columns[j].style.background = "url('C:/images/arrowdoubleup.jpg')";
							   paintOver(Allrows[i - 1].cells[j],Allrows[i + 1].cells[j]);
						 }
					 } 	 
					 
					 }
					 }
					if (columns[j] == columns[0] || columns[j] == columns[20]){ 
					if (Allrows[i - 1].cells[j].innerHTML == mass[c]){					 
					     if (Allrows[i + 1].cells[j].innerHTML == mass[c + 1]){
						       columns[j].style.background = "url('C:/images/arrowdown.jfif')";
							   paintOver(Allrows[i - 1].cells[j],Allrows[i + 1].cells[j]);
							   comparison(mass,newarr,Allrows[i - 1].cells[j],Allrows[i + 1].cells[j]);
						 }
						 if (Allrows[i + 1].cells[j].innerHTML == mass[c - 1]){
						       columns[j].style.background = "url('C:/images/arrowup.jfif')";
							   paintOver(Allrows[i - 1].cells[j],Allrows[i + 1].cells[j]);
							   comparison(mass,newarr,Allrows[i - 1].cells[j],Allrows[i + 1].cells[j]);
						 }
						 if (Allrows[i + 1].cells[j].innerHTML == mass[c]){
						       columns[j].style.background = "url('C:/images/arrowdoubleup.jpg')";
							   paintOver(Allrows[i - 1].cells[j],Allrows[i + 1].cells[j]);
						 }
					 }
                  } else {
				    if (columns[j - 1].innerHTML == mass[c]){					 
					     if (columns[j + 1].innerHTML == mass[c + 1]){
						       columns[j].style.background = "url('C:/images/arrowright.jfif')";
							   paintOver(columns[j - 1],columns[j + 1]);
							   comparison(mass,newarr,columns[j - 1],columns[j + 1]);
						 }
						 if (columns[j + 1].innerHTML == mass[c - 1]){
						       columns[j].style.background = "url('C:/images/arrowleft.jfif')";
							   paintOver(columns[j - 1],columns[j + 1]);
							   comparison(mass,newarr,columns[j - 1],columns[j + 1]);
						 }
						 if (columns[j + 1].innerHTML == mass[c]){
						       columns[j].style.background = "url('C:/images/arrowdoubleright.jpg')";
							   paintOver(columns[j - 1],columns[j + 1]);
						 }
						 
					   if (Allrows[i - 1].cells[j].innerHTML == mass[c]){					 
					     if (Allrows[i + 1].cells[j].innerHTML == mass[c + 1]){
						       columns[j].style.background = "url('C:/images/arrowdown.jfif')";
							   paintOver(Allrows[i - 1].cells[j],Allrows[i + 1].cells[j]);
							   comparison(mass,newarr,Allrows[i - 1].cells[j],Allrows[i + 1].cells[j]);
						 }
						 if (Allrows[i + 1].cells[j].innerHTML == mass[c - 1]){
						       columns[j].style.background = "url('C:/images/arrowup.jfif')";
							   paintOver(Allrows[i - 1].cells[j],Allrows[i + 1].cells[j]);
							   comparison(mass,newarr,Allrows[i - 1].cells[j],Allrows[i + 1].cells[j]);
						 }
						 if (Allrows[i + 1].cells[j].innerHTML == mass[c]){
						       columns[j].style.background = "url('C:/images/arrowdoubleup.jpg')";
							   paintOver(Allrows[i - 1].cells[j],Allrows[i + 1].cells[j]);
						 }
					 } 	 
					 }
				  }					 
			   }
			    break;
			 }
			 }
			 
			 }
			 
			 alert('Row: ' + i + ', Column: ' + j,counter);
			 });
		}
    </script>
</html>